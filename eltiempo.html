<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<style type="text/css">

	body {
		background-color: #FFCC66;
	}

</style>

<head>

		<title>El tiempo</title>
		<meta charset="ISO-8859-1"/>

        <h4>EL TIEMPO</h4>  <hr/> </br>

</head>


	<body onLoad="carga_informacion()">
	
			
		<script>
			function carga_informacion(){
					
					var parameter = "lon";
					var parameter2 = "lat";
					
					//llamada a las funciones para captar las variables pasadas desde el objeto padre
					var lon = getParameter(parameter);
					var lat = getParameter(parameter2);
					

					$("#datos").load('clima.php?lon=' +lon+ "&lat="+lat);

					//Carga el clima php y devuelve el resultado de la consulta en el id de datos
					//$("#datos").load('clima.php');
					

				
			}
			
			
			//función que devuelve el parametro pasado por la url desde el objeto padre
			function getParameter(parameter){
			
                  // Obtiene la cadena completa de URL
                  var url = location.href;
                  /* Obtiene la posicion donde se encuentra el signo ?, ahi es donde empiezan los parametros */
                  var index = url.indexOf("?");
                  /* Obtiene la posicion donde termina el nombre del parametro e inicia el signo = */
                  index = url.indexOf(parameter,index) + parameter.length;
                  /* Verifica que efectivamente el valor en la posicion actuales el signo = */
                  if (url.charAt(index) == "="){
                  // Obtiene el valor del parametro
                  var result = url.indexOf("&",index);
                  if (result == -1){result=url.length;};
                  // Despliega el valor del parametro
                  var resultado = url.substring(index + 1,result);
				  return resultado;
                  //alert(resultado);
                  }

            } 
		</script>

		<div id='datos'></div>


	</body>
	
	<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
		

</html>